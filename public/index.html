<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>七大歧记</title>
    <link rel="preload" href="https://chinese-fonts-cdn.deno.dev/packages/jhlst/dist/%E4%BA%AC%E8%8F%AF%E8%80%81%E5%AE%8B%E4%BD%93v2_002/result.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <!--<link rel="stylesheet" href="https://chinese-fonts-cdn.deno.dev/packages/jhlst/dist/%E4%BA%AC%E8%8F%AF%E8%80%81%E5%AE%8B%E4%BD%93v2_002/result.css" media="print" onload="this.media='all'; this.onload=null;">-->
    <noscript>
        <link rel="stylesheet" href="https://chinese-fonts-cdn.deno.dev/packages/jhlst/dist/%E4%BA%AC%E8%8F%AF%E8%80%81%E5%AE%8B%E4%BD%93v2_002/result.css">
    </noscript>

<script>
  // 确保 preload 的 onload 事件被正确处理
  // （上面的 onload 属性已经处理了）
</script>
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background-image: url('./img/bg.png');
            background-repeat: repeat-y;
            background-size: 100% auto;
            background-position: top center;
            font-family:'KingHwa_OldSong';
            font-weight:'400';
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        * {
            font-family:'KingHwa_OldSong';
            font-weight:'400';
            transition: all ease .3s;
        }
        code {
            color: #45301cbb;
        }
        .banner {
            width: 100%;
            display: block;
        }
        .content {
            max-width: 800px;
            margin: auto;
            margin-top: -0.5rem;
            margin-bottom: 1.5rem;
            padding: .5rem;
            font-size: 1.2em;
            color: #392410;
        }
        #nav {
            margin:auto;
        }

        a {
            color: inherit;
        }

        .giscus-frame{
            max-height: 90vh !important;
        }

        .image-container {
            display: flex;
            width: 100%;
            justify-content: center;
        }

        .image-container img {
            flex: 1;
            height: auto;
            width: 0;
            flex-grow: 1;
            object-fit: cover;
            border: 1px solid #ccc;
            display: block;
        }
        
        .auto-breakword > * {
            text-overflow: unset !important;
            overflow: unset;
            white-space: pre-wrap !important;
            word-break: break-all !important;
        }

        .auto-breakword {
            white-space: pre-wrap !important;
            word-break: break-all !important;
        }

        .nav-active {
            text-decoration: underline !important;
            filter: brightness(1.2) opacity(1) !important;
            color: #000 !important;
        }

        .nav-object {
            text-decoration: none;
            color: #666;
            filter: opacity(0.7) blur(0.25px);
        }

        .search-working {
            color: #666;
            transition: animation .2s ease;
            animation: anim-search-working 2s infinite ease-in-out;
        }

        @keyframes anim-search-working {
        0%, 100% {
            filter: drop-shadow( 0 10px 4px rgba(255, 204, 0, 0.6));
        }
        50% {
            filter: drop-shadow( 0 20px 8px rgba(255, 204, 0, 0.4));
        }
        }

        .search-error {
            color: #666;
            transition: animation .2s ease;
            animation: anim-search-error 2s infinite ease-in-out;
        }

        @keyframes anim-search-error {
        0%, 100% {
            filter: drop-shadow( 0 0 4px rgba(255, 0, 0, 0.6));
        }
        50% {
            filter: drop-shadow( 0 0 8px rgba(255, 0, 0, 0.5));
        }
        }

        #nav-sidebar {
            display: flex;
            flex-direction: column;
            width: 16rem;
            height: 100%;
            position: fixed;
            right: 0;
            top: 0;
            background-color: #f6ead5c4;
            backdrop-filter: blur(5px);
            transition: width 0.3s;
            overflow: auto;
            overflow-x: hidden !important;
            z-index:69;
            color: #ddd;
        }

        #nav-sidebar-toc-list {
            list-style: none;
            padding: .25rem .75rem .25rem .5rem;
            margin-top: 0;
            margin-bottom: 0;
        }

        #nav-sidebar-sub {
            display: flex;
            flex-direction: column;
            width: 32rem;
            height: 100%;
            position: fixed;
            right: 0;
            top: 0;
            background-color: #f3e3c6b3;
            backdrop-filter: blur(8px);
            transition: width 0.3s;
            overflow: auto;
            overflow-x: hidden !important;
            z-index:64;
        }

        #nav-sidebar-wrapper {
            margin-top:auto;
            white-space: normal;
            word-wrap: break-word;
            overflow-wrap: break-word;
            width: 16rem;
            min-width: 16rem;
            max-width: 16rem;
            margin-bottom: 3rem;
        }

        #nav-sidebar-sub-wrapper {
            margin-top:auto;
            white-space: normal;
            word-wrap: break-word;
            overflow-wrap: break-word;
            width: 16rem;
            max-width: 16rem;
            min-width: 16rem;
            margin-bottom: 0;
        }

        #nav-sidebar-sub-wrapper p{
            margin:.125rem;
        }

        #nav-sidebar-wrapper > *, #nav-sidebar-sub-wrapper > * {
            margin: 0.5rem 5% 0 5%;
            min-width: 90%;
            max-width: 90%;
        }

        #nav-sidebar-wrapper > button, #nav-sidebar-sub-wrapper > button, .nav-sidebar-btn {
            margin-left: 1rem;
            margin-right: 1rem;
            appearance:none !important;
            background-color:#f5f5f5;
            border:none;
            border-radius:0.75rem;
            box-shadow:0px 1px 2px #ecb24866;
            color:#2c2e31ff;
            outline:2px solid transparent !important;
        }

        .nav-sidebar-collapsed{
            width: 0 !important;
            overflow: hidden;
            overflow-x: hidden !important;
        }

        #nav-toggle-button {
            position: fixed;
            right: 28rem;
            bottom: 3.5rem;
            width: 6rem;
            height: 3rem;
            background-color: #705117b0;
            backdrop-filter: blur(3px);
            font-family: Arial, Helvetica, sans-serif;
            color: #f6ead5;
            border: none;
            cursor: pointer;
            border-radius: 1.5rem;
            font-size: 1.5rem;
            text-align: left;
            transition: transform .3s, bottom .3s, right .3s, width .3s;
            transform-origin: right;
            display: block;
            z-index: 60;
            transform: rotate(0deg);
            filter: drop-shadow(0 0 .4rem #bbb);
        }

        #nav-toggle-button-arrow {
            transition: transform 0.3s, bottom 0.3s, right 0.3s;
            transform-origin: center;
            display: block;
            width: fit-content !important;
            bottom: 0;
            transform: rotate(180deg);
            margin-left: .5rem;
        }

        .nav-sidebar-collapsed-btn #nav-toggle-button-arrow {
            display: block;
            /* right: .5rem; */
            margin-bottom: -1.25rem;
            transform: rotate(270deg);
        }

        #nav-toggle-button.nav-sidebar-sub-collapsed-btn {
            right: 12rem;
            bottom: 3.5rem;
            transform: rotate(0deg);
        }

        #nav-toggle-button.nav-sidebar-collapsed-btn.nav-sidebar-sub-collapsed-btn {
            display: block;
            right: .25rem;
            bottom: 1rem;
            width: 10rem;
            transform: rotate(90deg);
        }
        
        *::-webkit-scrollbar-track {
            display: none;
            background-color: rgba(255, 255, 255, 0);
            /*
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            border-radius: 10px;
            background-color: #F5F5F5;
            */
        }

        *::-webkit-scrollbar {
            width: .75rem;
            background-color: rgba(255, 255, 255, 0);
            position: fixed !important;
            right: 1rem;
            padding:2rem 1rem 2rem 0;
            /*background-color: #F5F5F5;*/
        }

        *::-webkit-scrollbar-thumb {
            border-radius: .625rem;
            /*-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);*/
            background-color: rgba(118, 118, 118, 0.56);
            margin: 2rem 1rem 2rem 0;
        }
        pattern {
            color: #705117;
            color: #c58d28;
            color: #e2ba71;
            color: #f3e3c6;
            color: #f6ead5;
            color: #e2ba71;
            color: #b07e24;
            color: #7199e2;
            color: #2455b0;
            color: #e2ba71;
            color: #b5e271;
            color: #71e282;
            color: #71e2d6;
            color: #7199e2;
            color: #9e71e2;
            color: #e271d2;
            color: #e2717d;
        }
    </style>
</head>
<body>
    <img src="./img/banner.png" alt="Banner" class="banner">
        <div id="nav"><a href="./index.html" target="_blank" rel="noopener noreferrer">七大歧记</a>|<a href="./said.html" target="_blank" rel="noopener noreferrer">《七大云》</a>|<a href="./anno.html" target="_blank" rel="noopener noreferrer">重要讲话</a>|<a href="./hist.html" target="_blank" rel="noopener noreferrer">更新历史</a></div>
    <div class="content">
        <html><head></head><body><h1>写在最前</h1>
<p><img src="./img/01284437-3de8-41cc-9791-43fbd2cfce8e.png" loading="lazy"></p>
<p>本页面名称由来（鸣谢<del>红</del>温姐）</p>
<blockquote>
<p>群史官群：<code>141546185</code></p>
</blockquote>
<hr>
<blockquote>
<p>感谢<code>👍💯👏</code>以下史官·<code>七之蚁</code>参与编辑<code>（排名不分先后，先到先得）</code>：</p>
</blockquote>
<ul>
<li><p>几何星空<code>（下届CCBC17不会有这里面的题吧）</code></p>
</li>
<li><p>shiveords<code>（肉脯脯/家里有个零食店）</code></p>
</li>
<li><p>dao__li <code>（《七大云》栏目常驻史官）</code></p>
</li>
<li><p>落堀</p>
</li>
<li><p>Sigma</p>
</li>
<li><p>噬梦浊流<code>（队内名称为llhhkl）（不要藏题不要藏题）</code></p>
</li>
<li><p>addmeal</p>
</li>
<li><p>CeI₂NK₇</p>
</li>
<li><p>cyx.<code>(思路挺广的新史官)</code></p>
</li>
<li><p>sky <code>(&amp; aqua?)（Reviver Team / cff_0102）</code></p>
</li>
<li><p>（某不愿透露姓名史官）</p>
</li>
<li><p>苍穹玥夜</p>
</li>
<li><p>yswyyy</p>
</li>
<li><p>Copy&amp;Paste</p>
</li>
<li><p>JZE</p>
</li>
<li><p>GreasyPig</p>
</li>
<li><p>蓝矾</p>
</li>
<li><p>Tellurium</p>
</li>
<li><p>空城</p>
</li>
<li><p>EterIll <code>(网页化进行中)</code></p>
</li>
</ul>
<h1>正文部分</h1>
<p>队伍信息：</p>
<div class="image-container">
<img src="./img/5f99e508-e11b-4c7f-b51b-9a36d1ff4412.png" alt="密码菌一人大冒险" loading="lazy">
<img src="./img/194baf4d-386d-4796-ba2e-7017e98dc356.png" alt="队长：Seven" loading="lazy">
</div>

<h2>🚩8.18 20:30 第一日开始！</h2>
<p>8.18 20:00-20:30 模拟炸服</p>
<h4>8.18 20:49 完成「五音俱全」</h4>
<div class="image-container">
<img src="./img/3f64b813-df8a-4527-99d2-9dee9b41d216.jpg" loading="lazy">
<img src="./img/cf0a4b40-1af7-4c72-906a-58469a888ae4.png" loading="lazy">
<img src="./img/6d6bebc1-29f6-4bee-baa3-f630c12d7c52.png" loading="lazy">
</div>

<h4>8.18 21:00 完成「通用机器人」</h4>
<p>8.18 21:13 意识涣散</p>
<p>8.18 21:20 意识到多解</p>
<h4>8.18 21:22 完成「举🚩不定」</h4>
<div class="image-container">
<img src="./img/dbf81c9f-83f6-4cd4-acd8-b0e61698be62.jpg" loading="lazy">
</div>

<p>8.18 21:29 拼出“义”</p>
<p>8.18 21:33 拼出“未”/“末”</p>
<p>8.18 21:35 拼出“勺”/“月” </p>
<p>8.18 21:36 拼出“江”</p>
<p>8.18 21:38 爆出“西江月”</p>
<p>8.18 21:40 爆出“秋收起义”</p>
<h4>8.18 21:42 完成「一笔画」</h4>
<div class="image-container">
<img src="./img/7a8f7549-c9c6-44e0-b1ab-626f4de2f6fe.jpg" loading="lazy">
<img src="./img/5ee2f42b-27cf-4ec3-80a3-0f9cf9196307.jpg" loading="lazy">
<img src="./img/f3074f09-785a-4910-b86f-9fbc5552a667.jpg" loading="lazy">
</div>


<div class="image-container">
<img src="./img/359b2003-b12c-4a82-9ac4-730b713b7d24.jpg" loading="lazy">
<img src="./img/4cd5af48-5932-4a63-9e57-caed1656aa66.png" loading="lazy">
<img src="./img/76329f88-fe5e-4966-9ec0-011343f75ec2.jpg" loading="lazy">
<img src="./img/27dd67a4-6a6f-4629-943e-6601721abc72.png" loading="lazy">
</div>


<div class="image-container">
<img src="./img/41e15ff9-a6f2-4102-8f76-66c294cdbd8d.png" loading="lazy">
<img src="./img/d529e34f-f664-44e0-9a6a-6b453b63777e.png" loading="lazy">
</div>

<p>8.18 21:43 开始尝试做“四方谜”</p>
<p>8.18 21:52 向弹幕寻求帮助 信用点-20000</p>
<div class="image-container">
<img src="./img/42e2ed06-3e54-4984-8a7e-93c1aff0bf0f.png" loading="lazy">
<img src="./img/38072a3a-cf55-4e3f-bce5-ec3149389617.png" loading="lazy">
</div>

<p>8.18 22:00 “这个题当时真的有人能秒吗”</p>
<p>8.18 22:02 "今天的目标是四方谜一定要做出来！"</p>
<p>8.18 22:05 “对吗？不对吧？对吗？不对吧？......"</p>
<p>8.18 22:12 “哦~我似乎有点感觉了"</p>
<p>8.18 22:18 利用增速异常的信用点疯狂消费信用点直接看答案，引起群友争议</p>
<p><code>（诶seven这名选手信用点增速怎么是我们做这道题的时候的五倍啊，七大来查一下谢谢）</code></p>
<div class="image-container">
<img src="./img/b2b6bf3a-f5d7-4b3e-a6c5-a9f4493fb951.png" loading="lazy">
</div>

<h4>8.18 21:42 完成「一笔画」</h4>
<p>8.18 22:21 得到：SEND NAZO “仰” 开始出题</p>
<p>8.18 22:23 "我们要做一个 善良的人，与人方便 与己方便"</p>
<p>8.18 22:25 《哪吒闹海》</p>
<div class="image-container">
<img src="./img/ae165293-42da-41a8-949d-7a3854622a34.png" loading="lazy">
<img src="./img/be3284f3-1f83-41e6-99c1-801fec5833c5.png" loading="lazy">
<img src="./img/0feb03d5-d2be-42f5-89df-5448758361ec.png" loading="lazy">
</div>

<p>解析：痛仰乐队</p>
<p>8.18 22:29 在CCBC官方群內发言：“这谁出的题啊，太好了吧”</p>
<div class="image-container">
<img src="./img/e581e53b-f28b-4b16-a276-7ddd9eed669e.jpg" loading="lazy">
</div>

<p>8.18 22:35 开始出备选方案2</p>
<p>8.18 22:38 "出孬题我可是太擅长了"</p>
<p>8.18 22:40 "我可太喜欢这种题了，我可以在这出一天”</p>
<p>8.18 22:42 "我的目标是 把千字谜所有题目都做出来"</p>
<div class="image-container">
<img src="./img/3f50562c-93c3-4b84-ba1f-c98ffed63ebc.png" loading="lazy">
<img src="./img/9d82dbb5-ed54-46ce-8288-bf5eceabba99.png" loading="lazy">
</div>

<h4>8.18 22:43 直播琵琶，完成「四方谜」</h4>
<p>我看是我欲因之梦吴越</p>
<div class="image-container">
<img src="./img/caa7b11e-49af-4148-9844-887303ee4a2a.png" loading="lazy">
</div>
8.18 22:53 “相辅相成”毫无头绪

<p>8.18 22:59 “让我们来看看是谁出的题”“原来是你小子”</p>
<p>8.18 23:00 把东京塔🗼认成法国埃菲尔铁塔</p>
<div class="image-container">
<img src="./img/b1554937-dd3e-44ed-afa8-5d41316a1c33.png" loading="lazy">
</div>
8.18 23:06 看到黄色+感叹号，认为是马里奥问号箱

<p><img src="https://docimg5.docs.qq.com/image/AgAABYwtnob58gIYPrBI86pCQiCvGkKN.png?w=640&amp;h=480" alt="图片" loading="lazy"></p>
<div class="image-container">
<img src="./img/4067fae9-9c0e-4636-88a3-328e150ed4ce.png" loading="lazy">
</div>
8.18 23:08 完成emoji填空 提交👍💯👏

<p><img src="https://docimg1.docs.qq.com/image/AgAABYwtnoblKyjqdLdPXrSKaCl2Cny-.png?w=799&amp;h=696" alt="图片" loading="lazy"></p>
<div class="image-container">
<img src="./img/6c818612-3880-408a-b7f2-7238a303abac.png" loading="lazy">
</div>
8.18 23:14 错误地认为弹幕透露的“莫斯”是自己的实力

<p><img src="https://docimg1.docs.qq.com/image/AgAABYwtnoYoStJC6zFMG7T5kwk5trLh.png?w=640&amp;h=480" alt="图片" loading="lazy"></p>
<div class="image-container">
<img src="./img/6c818612-3880-408a-b7f2-7238a303abac.png" loading="lazy">
</div>

<h4>8.18 23:16 完成「恶魔斯基」</h4>
<h4>8.18 23:50 完成「数字」</h4>
<h4>8.18 23:53 明日目标：完成序章（未能达成）</h4>
<h2>8.19 20:30 第二日开始！</h2>
<p>8.19 20:32 觉醒前世记忆，以惊人的注意力找到霓虹七色的代表图 “我有印象字是我P的”</p>
<p>8.19 20:42 “一不小心撇到弹幕”（一不小心琵琶了）</p>
<p>8.19 21:20 “怎么做了一个小时还没做出来一道题”</p>
<h4>8.19 21:24 完成「霓虹七色」</h4>
<div class="image-container">
<img src="./img/9e5a4811-c5cc-4fb8-946e-be6b3c808479.png" loading="lazy">
<img src="./img/656d9243-38be-4a71-a5c3-56db8202e9bd.png" loading="lazy">
<img src="./img/656d9243-38be-4a71-a5c3-56db8202e9bd.png" loading="lazy">
</div>
<div class="image-container">
<img src="./img/64ad93f6-9512-421b-86da-0a94428ce28f.png" loading="lazy">
<img src="./img/aca36bb9-8183-45af-b97c-07468aeb5c1c.jpg" alt="琵琶" loading="lazy">
<img src="./img/ee9c17d2-d2fa-4b83-ac15-22227bde1379.jpg" loading="lazy">
</div>
<div class="image-container">
<img src="./img/f37dff29-bdb9-4fa6-a85c-d88eb7ba8e8a.png" loading="lazy">
<img src="./img/cbdcf443-7a89-43d5-b036-d68f535f72c4.png" loading="lazy">
</div></body></html>
    </div>
    
<div id="nav-sidebar" class="nav-sidebar-collapsed">
    <!-- 边栏内容 -->
    <div id="nav-sidebar-wrapper">
        <button onclick='toggleSidebarSub("nav-sidebar-sub-group-1","nav-sidebar-sub","nav-sidebar-sub-wrapper");'>站内信</button>
        <hr />
        <button onclick='toggleSidebarSub("nav-sidebar-sub-group-2","nav-sidebar-sub","nav-sidebar-sub-wrapper");'>传送门</button>
        <div is="search-bar" target='nav-sidebar-toc-list'></div>
        <ul id="nav-sidebar-toc-list" style="max-height:24rem;overflow-y: scroll!important;border-bottom: .125rem solid #000;" class="searchlist-breakword">
            <li>当前页面不支持章节导航。</li>
        </ul>
    </div>
</div>
<button id="nav-toggle-button" onclick="toggleSidebar()"><div id="nav-toggle-button-arrow">&lt;</div></button>
<!-- 二级菜单 -->
<div id="nav-sidebar-sub">
    <div id="nav-sidebar-sub-wrapper">

        <div id="nav-sidebar-sub-group-1" class="nav-sidebar-group auto-breakword" sytle="padding:0.125rem;">
            <script src="https://giscus.app/client.js"
                data-repo="EternalIllusion/Web-Giscus"
                data-repo-id="R_kgDOPj1mtA"
                data-category="Announcements"
                data-category-id="DIC_kwDOPj1mtM4CukJr"
                data-mapping="url"
                data-strict="1"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="bottom"
                data-theme="preferred_color_scheme"
                data-lang="zh-CN"
                data-loading="lazy"
                crossorigin="anonymous"
                async>
            </script>
            <p style="margin:auto">若无显 请等待 <a href="javascript:;" onclick='document.querySelector("iframe.giscus-frame").scrollTo({top:99999})''>显输入</a></p>
        </div>
        <div id="nav-sidebar-sub-group-2" class="nav-sidebar-group auto-breakword" sytle="padding:1rem;">
            <button onclick='linkact("https://ccbc16.cipherpuzzles.com/")' class="nav-sidebar-btn" style="margin: 0.5rem 5% 0 5%;min-width: 90%; max-width: 90%;">西拾陆</button>
            <button onclick='linkact("https://triddles.ccbcarchive.com/")' class="nav-sidebar-btn" style="margin: 0.5rem 5% 0 5%;min-width: 90%; max-width: 90%;">三字谜</button></a>
            <button onclick='linkact("https://brackets.ccbcarchive.com/")' class="nav-sidebar-btn" style="margin: 0.5rem 5% 0 5%;min-width: 90%; max-width: 90%;">说带括</button></a>
            <button onclick='linkact("https://eterill.xyz/")' class="nav-sidebar-btn" style="margin: 0.5rem 5% 0 5%;min-width: 90%; max-width: 90%;">吾博客</button></a>
            <button onclick='linkact("https://qm.qq.com/q/itWk4lAGQM")' class="nav-sidebar-btn" style="margin: 0.5rem 5% 0 5%;min-width: 90%; max-width: 90%;">加群聊</button></a>
        </div>
    </div>
</div>
</div>


<script>

</script>
    <script>
        function linkact(href) {
            if (!href || typeof href !== 'string') {
                console.error('Invalid href');
                return;
            }

            const url = /^https?:\/\//i.test(href) ? href : 'https://' + href;

            const a = document.createElement('a');
            a.href = url;
            a.target = '_blank';
            a.rel = 'noopener noreferrer';
            a.style.display = 'none';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        function imgresize() {
            const imageContainers = document.querySelectorAll('.image-container');
            const maxHeight = 480;

            imageContainers.forEach(container => {
                const images = container.querySelectorAll('img');
                if (images.length === 0) return;
                let totalNaturalWidth = 0;
                images.forEach(img => {
                    totalNaturalWidth += img.naturalWidth * (maxHeight / img.naturalHeight);
                });
                const containerWidth = container.offsetWidth;
                const scale = containerWidth / totalNaturalWidth;
                const actualHeight = Math.min(maxHeight, maxHeight * scale);
                images.forEach(img => {
                    const scaledWidth = img.naturalWidth * (actualHeight / img.naturalHeight);
                    img.style.height = actualHeight + 'px';
                    img.style.width = scaledWidth + 'px';
                    img.style.objectFit = 'cover';
                });
            });
        }
        window.addEventListener('DOMContentLoaded', function () {
            const lazyImages = document.querySelectorAll('img[loading="lazy"]');
            lazyImages.forEach(img => {
                img.addEventListener('load', function() {
                    imgresize();
                });
                img.addEventListener('error', function() {
                    console.error('图片加载失败:', this.src);
                });
            });
            imgresize();
        });
        window.addEventListener("resize", imgresize);

        async function performSearch(query, inputDOM, itemDOM, flags = 'gi') {
        try {
            const items = itemDOM.querySelectorAll('li');
            const queryLower = query.toLowerCase();
            while(itemDOM.innerHTML.includes('<mark class="highlight">')) { itemDOM.innerHTML = itemDOM.innerHTML.replace('<mark class="highlight">', '').replace('</mark>', ''); }
            if (!queryLower.includes(' ')) {
            items.forEach((li, index) => {
                const text = (li.dataset.index || li.getAttribute('data-index') || li.textContent || li.innerHTML).trim();
                const textLower = text.toLowerCase();
                const regex = new RegExp(query, flags);
                if (regex.test(textLower)) {
                if (queryLower.length > 0) {
                    li.innerHTML = li.innerHTML.replace(/(<[^>]+>)|(&\S{1,4};)|([^<&]+)/gi, function (_, tag, entity, text) {
                    //console.log(`${tag} ${entity} ${text}`);
                    if (tag) return tag;
                    if (entity) return entity;
                    if (!text) return text;
                    return text.replace(regex, '<mark class="highlight">$&</mark>');
                    });
                    inputDOM.classList.remove('search-error');
                }
                li.style.display = 'list-item';
                } else {
                li.style.display = 'none';
                }
            });
            } else {
            const querykeywords = queryLower.split(' ');
            items.forEach((li, index) => {
                const text = (li.dataset.index || li.getAttribute('data-index') || li.textContent || li.innerHTML).trim();
                const textLower = text.toLowerCase();
                let willdisplay = true;
                querykeywords.forEach((kw, index) => {
                const regex = new RegExp(kw, flags);
                if (regex.test(textLower)) {
                    if (kw.length > 0) {
                    li.innerHTML = li.innerHTML.replace(/(<[^>]+>)|(&\S{1,4};)|([^<&]+)/gi, function (_, tag, entity, text) {
                        //console.log(`${tag} ${entity} ${text}`);
                        if (tag) return tag;
                        if (entity) return entity;
                        if (!text) return text;
                        return text.replace(regex, '<mark class="highlight">$&</mark>');
                    });
                    inputDOM.classList.remove('search-error');
                    }
                } else {
                    willdisplay = false;
                }
                });
                li.style.display = willdisplay ? 'list-item' : 'none';
            });
            }
            inputDOM.classList.remove('search-working');
        } catch (e) {
            inputDOM.classList.remove('search-working');
            inputDOM.classList.add('search-error');
            console.log(`search-error:${e}`);
        }
        }

        class SearchBar extends HTMLDivElement {
        constructor() {
            super();
        }
        connectedCallback() {
            this.target = this.getAttribute('target');
            this.inputId = this.getAttribute('inputid') || `searchbar-input-${Math.random().toString(16).slice(2)}`;
            this.baseColor = this.getAttribute('color') || '#2c2e31ff';
            this.shadowColor = this.getAttribute('shadowcolor') || '#11182726';
            this.defaultText = this.getAttribute('default') || '';
            this.placeholderText = this.getAttribute('placeholder') || 'Search...';
            this.innerHTML = `<svg style="color:${this.baseColor};height:1.25rem;left:1.25rem;opacity:.6;position:absolute;width:1.25rem;z-index:1;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 1 1-14 0 7 7 0 0 1 14 0"></path></svg><input style="padding:0 .5rem 0 2.5rem !important;width:100%;appearance:none !important;background-color:#f5f5f5;border:none;border-radius:0.75rem;box-shadow:0px -1px 2px ${this.shadowColor};color:${this.baseColor};outline:2px solid transparent !important;min-height:2.25rem !important;font-size:.875rem;line-height:1.25rem;margin:0;padding-block:1px;padding-inline:2px;overflow-clip-margin:0px !important;overflow:clip !important;box-sizing:border-box;" id="${this.inputId}" value="${this.defaultText}" class="searchbar-input" type="text" placeholder="${this.placeholderText}" autocomplete="off">
            `;
            this.inputDOM = this.querySelector('input');
            this.style += "display:flex !important;padding:.25rem .5rem .25rem .5rem;box-sizing:border-box;align-items:center;position:relative;line-height:1.15;display:flex !important;";
            const targetEL = this.target;
            const inputDOMEL = this.inputDOM;
            //console.log(targetEL);
            document.addEventListener('DOMContentLoaded', () => {
            //console.log(targetEL);
            let debounceTimer;
            const targetDOMEL = document.getElementById(targetEL);
            this.inputDOM.addEventListener('input', async (event) => {
                const query = event.target.value;
                inputDOMEL.classList.add('search-working');
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(async () => {
                await performSearch(query, inputDOMEL, targetDOMEL);
                }, 300);
            });
            });
        }
        }

        customElements.define('search-bar', SearchBar, { extends: 'div' });

        /* Cookie Utils */

        function setCookieBool(key, value) {
        var d = new Date();
        d.setTime(d.getTime() + (24 * 60 * 60 * 1000));
        document.cookie = `${key}=${(value ? 'true' : 'false')};expires=${d.toUTCString()};path=/`;
        }

        function setCookie(key, value) {
        var d = new Date();
        d.setTime(d.getTime() + (24 * 60 * 60 * 1000));
        document.cookie = `${key}=${value};expires=${d.toUTCString()};path=/`;
        }

        function getCookieBool(key, auto = false) {
        var name = `${key}=`;
        var ca = decodeURIComponent(document.cookie).split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i].trim();
            while (c.charAt(0) == ' ') { c = c.substring(1); }
            if (c.indexOf(name) == 0) { return c.substring(name.length, c.length) === 'true'; }
        }
        return auto; // 如果没有找到l项，默认返回False
        }

        function getCookie(key, auto = null) {
        var name = `${key}=`;
        var ca = decodeURIComponent(document.cookie).split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i].trim();
            while (c.charAt(0) == ' ') { c = c.substring(1); }
            if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); }
        }
        return auto; // 如果没有找到l项，默认返回null
        }

        function toggleSidebar(id = 'nav-sidebar', toggleBtn = 'nav-toggle-button') {
        var sidebar = document.getElementById(id);
        var tbtn = document.getElementById(toggleBtn);
        if (sidebar.classList.contains('nav-sidebar-collapsed')) {
            sidebar.classList.remove('nav-sidebar-collapsed');
            tbtn.classList.remove('nav-sidebar-collapsed-btn');
            setCookieBool('navsidebar', true);
        } else {
            sidebar.classList.add('nav-sidebar-collapsed');
            tbtn.classList.add('nav-sidebar-collapsed-btn');
            closeSidebarSub();
            setCookieBool('navsidebar', false);
        }
        refreshSidebarBtn();
        }

        function toggleSidebarSub(currentid, id = 'nav-sidebar-sub', wrapperid = 'nav-sidebar-sub-wrapper', toggleBtn = 'nav-toggle-button') {
        var sidebar = document.getElementById(id);
        var parent = document.getElementById(wrapperid);
        var htm = document.getElementById(currentid);
        var tbtn = document.getElementById(toggleBtn);
        if (sidebar.classList.contains('nav-sidebar-collapsed')) {
            sidebar.classList.remove('nav-sidebar-collapsed');
            for (let i = 0; i < parent.children.length; i++) {
            parent.children[i].style.display = "none";
            }
            htm.style.display = "block";
            sidebar.classList.remove('nav-sidebar-collapsed');
            tbtn.classList.remove('nav-sidebar-sub-collapsed-btn');
        } else {
            if (htm.style.display == "none") {
            for (let i = 0; i < parent.children.length; i++) {
                //console.log(parent.children[i]);
                parent.children[i].style.display = "none";
            }
            htm.style.display = "block";
            } else {
            sidebar.classList.add('nav-sidebar-collapsed');
            tbtn.classList.add('nav-sidebar-sub-collapsed-btn');
            }
        }
        refreshSidebarBtn();
        }

        function closeSidebarSub(id = 'nav-sidebar-sub') {
            var sidebar = document.getElementById(id);
            sidebar.classList.add('nav-sidebar-collapsed');
            refreshSidebarBtn();
        }

        function refreshSidebarBtn(id = 'nav-toggle-button', sidebarid = 'nav-sidebar', sidebarsubid = 'nav-sidebar-sub') {
            var sidebar = document.getElementById(sidebarid);
            var sidebarsub = document.getElementById(sidebarsubid);
            var tbtn = document.getElementById(id);
            tbtn.classList.toggle('nav-sidebar-collapsed-btn', sidebar.classList.contains('nav-sidebar-collapsed'));
            tbtn.classList.toggle('nav-sidebar-sub-collapsed-btn', sidebarsub.classList.contains('nav-sidebar-collapsed'));
        }

        document.addEventListener('DOMContentLoaded', () => { refreshSidebarBtn(); });

        /* nav toc */

        document.addEventListener("DOMContentLoaded", function () {

        var selectors = [
            '.content',
            'body .container',
            'body'
        ];

        var content = null;

        // 根据选择器找到实际的文章内容容器
        for (var i = 0; i < selectors.length; i++) {
            content = document.querySelector(selectors[i]);
            if (content) break;
        }

        // 如果没有找到文章内容容器，则输出错误信息
        if (!content) {
            console.error("目录生成器无法找到内容容器。");
            return;
        }

        var headings = Array.from(content.querySelectorAll('h1, h2, h3, h4, h5, h6')).filter(function (heading) {
            return !heading.closest('#nav-sidebar, #nav-sidebar-sub, .card, .card-gallery');
        });

        var tocList = document.querySelector('#nav-sidebar-toc-list');
        tocList.innerHTML = '';

        // 计算目录中最小的标题等级（如h1、h2、h3等）
        let minLevel = 7;
        headings.forEach((heading) => {
            let level = parseInt(heading.tagName.substring(1));
            if (level < minLevel) {
            minLevel = level;
            }
        });
        headings.forEach(function (heading, index) {
            var id = 'nav-menu-heading-' + index;
            heading.id = id;

            var li = document.createElement('li');
            var a = document.createElement('a');
            a.href = '#' + id;
            a.textContent = heading.textContent;
            a.classList.add('nav-object');
            li.appendChild(a);
            var level = parseInt(heading.tagName.substring(1));
            li.style.marginLeft = (level - minLevel) * 0.2 + 'rem';
            //li.style.marginRight = 0.5 + 'rem';
            tocList.appendChild(li);
        });

        tocList.addEventListener('click', function (event) {
            if (event.target.tagName.toLowerCase() === 'a') {
            event.preventDefault();
            var targetId = event.target.getAttribute('href').substring(1);
            var targetElement = document.getElementById(targetId);

            if (targetElement) {
                // 平滑滚动到目标元素
                window.scrollTo({
                top: targetElement.offsetTop,
                behavior: 'smooth'
                });

                // 更新浏览器历史记录
                history.pushState(null, null, '#' + targetId);
            }
            }
        });

        function highlightCurrentHeading() {
            let currentHeadingId = null;
            const offset = 100;  // 滚动时的偏移量

            // 查找当前视口中的标题
            for (let i = 0; i < headings.length; i++) {
            const rect = headings[i].getBoundingClientRect();
            if (rect.top <= offset) {
                currentHeadingId = headings[i].id;
            } else {
                break;
            }
            }
            let targetLabel = null;

            // 高亮当前标题的目录项
            tocList.querySelectorAll('a').forEach(function (a) {
            if (a.getAttribute('href').substring(1) === currentHeadingId) {
                a.classList.add('nav-active');
                targetLabel = a;
            } else {
                a.classList.remove('nav-active');
            }
            });

            if (targetLabel) {
                const labelRect = targetLabel.getBoundingClientRect();
                const tocRect = tocList.getBoundingClientRect();
                
                // 计算应滚动到的位置（相对于 tocList 内容）
                const relativeTop = labelRect.top - tocRect.top + tocList.scrollTop;
                
                tocList.scrollTo({
                    top: relativeTop - 36, // -10 是留点上边距
                    behavior: 'smooth',
                    block: 'nearest' // 可选：避免不必要的滚动
                });
            }
        }

        // 监听滚动事件以更新当前高亮的目录项
        window.addEventListener('scroll', highlightCurrentHeading);
        highlightCurrentHeading();  // 初始化高亮

        });


        closeSidebarSub();
        if (getCookieBool('navsidebar')) {
            toggleSidebar();
        }
        refreshSidebarBtn();
    </script>
</body>
</html>